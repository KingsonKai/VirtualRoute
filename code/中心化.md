## 中心化

中心化路由器放在某一台分布式路由器上运行，主要有以下特点：

1. 所有分布式路由器假定和中心化路由器直接相连，分布式路由器都要保存中心化路由器的IP地址。每次发包时，向中心化路由器请求下一跳路由器的地址，请求包和我们的报文一样

请求包要等待响应，代码如下

```C++
int nSize = sizeof(SOCKADDR);
int ret = recvfrom(sock, recvBuf, MAXBYTE, 0, (SOCKADDR*)&sockServer, &nSize);
if (ret > 0) {
  recvBuf[ret] = '\0';
  cout << strlen(recvBuf) << endl;  // 测试
}

recvBuf -> 一个IP地址  如 "192.168.111.111" 15位，没有其他格式
```

| type | 源IP地址 | 目的IP地址                                   | 后面的信息是什么都行 |
| ---- | ----- | ---------------------------------------- | ---------- |
| 5    |       | 最主要的就是这里的目的IP地址，目的IP地址不是中心化路由器的地址，而是你要请求下一跳路由器所需要的IP地址 |            |

2. 心跳包，心跳包统一目的IP地址都是中心化路由器的IP地址，和之前不同的就是这里的心跳包都统一IP地址了，只发给中心化路由器，不发给其他邻居
3. down包，down包也只会发给中心化路由器，一旦中心化路由器收到down包，那就把所有路由器的路由表里面关联的链路全部置为不可达。
4. 不考虑路由更新表。如果有更改可以在中心化路由器处直接更改。
5. 中心化路由器依据目前接口编写代码。